---
layout: post
title:  "oauth2.0 스펙서 톺아보기 1"
writer: "배진환"
date: 2020-09-15 09:00:00 +0900
tags: oauth2 openidconnect protocol
---
올해 1,2분기 OAuth2 Authorization Server를 개발하면서 느낀점은 토큰 발급 및 인증 흐름을 
명확히 알고 있으면 구현할때 애를 먹지 않는구나 느꼈습니다. 혹시나 OAuth2 인증 서버를 구현해 볼 
생각이 있으신 분들은 꼭 한번씩 스펙서를 한번 읽어보고 도전해보시길 바랍니다.  
그리고 이미 오픈소스로 나와있는 client side library를 활용해 구현한 서버의 url을 넣고 
테스트를 하면 좀 더 스펙대로 개발할 수 있을겁니다.ㅎㅎ

서버 개발자 입장에서 필요한 정보와 개발해야되는 api들을 정리해 볼 생각입니다. 누군가에게 나중에 
도움이 될 수도 있고 저에게 소중한 기록으로도 남겠죠?

#Intro
OAuth2는 보통 
```
  +--------+                                           +---------------+
  |        |--(A)------- Authorization Grant --------->|               |
  |        |                                           |               |
  |        |<-(B)----------- Access Token -------------|               |
  |        |               & Refresh Token             |               |
  |        |                                           |               |
  |        |                            +----------+   |               |
  |        |--(C)---- Access Token ---->|          |   |               |
  |        |                            |          |   |               |
  |        |<-(D)- Protected Resource --| Resource |   | Authorization |
  | Client |                            |  Server  |   |     Server    |
  |        |--(E)---- Access Token ---->|          |   |               |
  |        |                            |          |   |               |
  |        |<-(F)- Invalid Token Error -|          |   |               |
  |        |                            +----------+   |               |
  |        |                                           |               |
  |        |--(G)----------- Refresh Token ----------->|               |
  |        |                                           |               |
  |        |<-(H)----------- Access Token -------------|               |
  +--------+           & Optional Refresh Token        +---------------+
```